{"version":3,"sources":["../../src/pages/group-detail/group-detail.module.ts","../../src/pages/group-detail/group-detail.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { GroupDetailPage } from './group-detail';\n\n@NgModule({\n  declarations: [\n    GroupDetailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(GroupDetailPage),\n  ],\n})\nexport class GroupDetailPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/group-detail/group-detail.module.ts","import { Component, group } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ActionSheetController, AlertController } from 'ionic-angular';\nimport { ShareServiceProvider } from '../../providers/share-service/share-service';\nimport { AuthServiceProvider } from '../../providers/auth-service/auth-service';\nimport { UserServiceProvider } from '../../providers/user-service/user-service';\nimport { GroupServiceProvider } from '../../providers/group-service/group-service';\nimport { EventServiceProvider } from '../../providers/event-service/event-service';\nimport { Group } from '../../data/group.interface';\nimport { TabsPage } from '../tabs/tabs';\n\n/**\n * Generated class for the GroupDetailPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-group-detail',\n  templateUrl: 'group-detail.html',\n})\nexport class GroupDetailPage {\n\n  group: Group\n  numberOfMember: number\n\n  membersInGroup = [];\n  organizers = [];\n  \n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public shareServiceProvider: ShareServiceProvider,\n    public authServiceProvider: AuthServiceProvider,\n    public userServiceProvider: UserServiceProvider,\n    public groupServiceProvider: GroupServiceProvider,\n    public eventServiceProvider: EventServiceProvider,\n    public actionSheetCtrl: ActionSheetController,\n    public alertCtrl: AlertController\n  ) {\n    this.group = navParams.data;\n    \n    try {\n      this.numberOfMember = this.group.members.length;\n\n      this.group.organizers.forEach(element => {\n        this.userServiceProvider.getUser(element).then((memberData) => {\n          this.organizers.push(memberData);\n\n        })\n      });\n\n\n\n      this.group.members.forEach(member => {\n        this.userServiceProvider.getUser(member).then((memberData) => {\n          this.membersInGroup.push(memberData);\n          \n        })\n      })\n    } catch (error) {\n      console.log(error);\n    }\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad GroupDetailPage');\n  }\n\n  presentActionSheet() {\n    var actionSheet = null;\n    // Not the group owner\n    if(this.group.owner != this.authServiceProvider.getLoggedUID()){\n      actionSheet = this.actionSheetCtrl.create({\n      \n        buttons: [\n          {\n            text: 'Quit Group',\n            role: 'destructive',\n            handler: () => {\n              const confirm = this.alertCtrl.create({\n                title: \"Are you sure to quit this group?\",\n                message: \"Reminder: You will also quit all of the event you have been joined\",\n                buttons: [\n                  {\n                    text: 'No',\n                    handler: () => {\n                      console.log('No clicked'); \n                    }\n                  },\n                  {\n                    text: 'Yes',\n                    handler: () => {\n                      var uid = this.authServiceProvider.getLoggedUID();\n                      console.log('Yes clicked');\n                      if(this.group.eventsSnapshot!=undefined){\n                        this.group.eventsSnapshot.forEach(element=>{\n                          this.eventServiceProvider.removeMemberFromEvent(uid, element.id);\n                        });\n                      }\n                      this.userServiceProvider.removeGroupFromUser(uid, this.group.id, this.authServiceProvider).then(()=>{\n                        this.groupServiceProvider.removeMebmerFromGroup(uid, this.group.id).then(()=>{\n                          this.shareServiceProvider.showToast(\"Quit group successfully\");\n                          this.navCtrl.setRoot(TabsPage);\n                          this.navCtrl.popToRoot();\n                        });\n                      });\n                      \n                    }\n                  }\n                ]\n              });\n              confirm.present();\n            }\n          },\n          {\n            text: 'Cancel',\n            role: 'cancel',\n            handler: () => {\n              console.log('Cancel clicked');\n            }\n          }\n        ]\n      });\n    }else { // is the group owner\n      actionSheet = this.actionSheetCtrl.create({\n      \n        buttons: [\n          {\n            text: 'Organize New Event',\n            handler: () => {\n              console.log('Create Event');\n              this.navCtrl.push(\"CreateEventPage\", this.group.id);\n            }\n          },\n          {\n            text: 'Delete Group',\n            role: 'destructive',\n            handler: () => {\n              console.log('Destructive clicked');\n            }\n          },\n          {\n            text: 'Cancel',\n            role: 'cancel',\n            handler: () => {\n              console.log('Cancel clicked');\n            }\n          }\n        ]\n      });\n    }\n    \n\n    actionSheet.present();\n  }\n\n  eventDetail(eventsSnapshot){\n    this.navCtrl.push(\"EventDetailPage\", eventsSnapshot)\n  }\n\n  goToMemberList(){\n    this.navCtrl.push('UsersListPage', this.membersInGroup)\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/group-detail/group-detail.ts"],"sourceRoot":""}
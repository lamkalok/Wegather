{"version":3,"sources":["../../src/pages/create-event/create-event.module.ts","../../src/pages/create-event/create-event.ts"],"names":[],"mappings":"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","file":"10.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CreateEventPage } from './create-event';\n\n@NgModule({\n  declarations: [\n    CreateEventPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CreateEventPage),\n  ],\n})\nexport class CreateEventPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/create-event/create-event.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { Camera, CameraOptions } from '@ionic-native/camera';\nimport { ShareServiceProvider } from '../../providers/share-service/share-service';\nimport { AuthServiceProvider } from '../../providers/auth-service/auth-service';\nimport { UserServiceProvider } from '../../providers/user-service/user-service';\nimport { GroupServiceProvider } from '../../providers/group-service/group-service';\nimport { EventServiceProvider } from '../../providers/event-service/event-service';\n\n/**\n * Generated class for the CreateEventPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-create-event',\n  templateUrl: 'create-event.html',\n})\nexport class CreateEventPage {\n\n  imgSrc: string;\n\n  groupID: string;\n\n  today = new Date(Date.now()).toISOString();\n\n  event = {\n    //dateStarts: new Date(Date.now()).toISOString(),\n    name: \"\",\n    location: \"\",\n    description: \"\",\n    dateStarts: undefined,\n    dateEnd: \"\",\n    img: \"\"\n  }\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public camera: Camera,\n    public shareServiceProvider: ShareServiceProvider,\n    public authServiceProvider: AuthServiceProvider,\n    public userServiceProvider: UserServiceProvider,\n    public groupServiceProvider: GroupServiceProvider,\n    public eventServiceProvider: EventServiceProvider,\n  ) {\n\n    this.groupID = this.navParams.data;\n    console.log(this.groupID);\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad CreateEventPage');\n  }\n\n  takeImage() {\n    const options: CameraOptions = {\n      quality: 65,\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE\n    }\n    this.camera.getPicture(options).then((imageData) => {\n      // imageData is either a base64 encoded string or a file URI\n      // If it's base64:\n      let base64Image = 'data:image/jpeg;base64,' + imageData;\n      this.imgSrc = base64Image;\n\n    }, (err) => {\n      // Handle error\n    });\n  }\n\n  createEvent() {\n\n    \n    try {\n      this.shareServiceProvider.showLoading();\n      console.log(this.event);\n      this.eventServiceProvider.uploadEventImage(this.imgSrc, this.event.name, this.authServiceProvider.getLoggedUID()).then((url) => {\n\n        url.subscribe(u => {\n\n          this.event.img = u;\n          this.eventServiceProvider.createEvent(this.event, this.authServiceProvider.getLoggedUID(), this.groupID).then(() => {\n            this.eventServiceProvider.createEventSnapShot(this.event, this.authServiceProvider.getLoggedUID(), this.groupID).then(() => {\n              this.shareServiceProvider.hideLoading();\n              this.shareServiceProvider.showToast(\"Event create successfully\");\n              this.navCtrl.pop();\n            })\n          });\n        })\n      });\n    } catch (error) {\n      this.shareServiceProvider.hideLoading();\n      this.shareServiceProvider.showToast(\"Event create fail: \" + error);\n    }\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/create-event/create-event.ts"],"sourceRoot":""}